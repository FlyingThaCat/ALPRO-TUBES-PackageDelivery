direction: down

start: "Mulai AssignPaketToKurir(username, noResi)" {
  shape: oval
}

findUser: "Cari kurir dengan FindUserByUsername(username)" {
  shape: rectangle
}

cekUserExists: "Apakah kurir.Username != \"\"?" {
  shape: diamond
}

returnFalse1: "return false" {
  shape: rectangle
}

cekRole: "Apakah kurir.Role == \"kurir\"?" {
  shape: diamond
}

printNotCourier: "Print 'Username bukan kurir'" {
  shape: rectangle
}

returnFalse2: "return false" {
  shape: rectangle
}

findPaket: "Cari paket dengan FindPaketByNoResi(noResi)" {
  shape: rectangle
}

cekPaketExists: "Apakah paket.NoResi != \"\"?" {
  shape: diamond
}

returnFalse3: "return false" {
  shape: rectangle
}

assignPaket: "Set paket.Kurir = username" {
  shape: rectangle
}

updateUserPakets: "Tambahkan paket ke kurir di UsersDB" {
  shape: rectangle
}

updateDB: "Panggil UpdatePaket(paket)" {
  shape: rectangle
}

returnTrue: "return true" {
  shape: rectangle
}

end: "Selesai" {
  shape: oval
}

start -> findUser -> cekUserExists
cekUserExists -> returnFalse1: Tidak
cekUserExists -> cekRole: Ya

cekRole -> printNotCourier: Tidak
cekRole -> findPaket: Ya
printNotCourier -> returnFalse2

findPaket -> cekPaketExists
cekPaketExists -> returnFalse3: Tidak
cekPaketExists -> assignPaket: Ya

assignPaket -> updateUserPakets -> updateDB -> returnTrue -> end
returnFalse1 -> end
returnFalse2 -> end
returnFalse3 -> end
